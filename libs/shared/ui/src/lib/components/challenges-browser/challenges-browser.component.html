<div class="challenges-browser">
  <!-- Category Sidebar (only shown in list view) -->
  @if (shouldShowSidebar()) {
  <app-category-sidebar [isOpen]="isSidebarOpen()" [isMobile]="isMobileView()"
    (categorySelect)="onCategorySelect($event)" (closeDrawer)="closeSidebar()" />
  }

  <!-- Main Content Area -->
  <main class="content-area" [class.shifted]="!isMobileView() && shouldShowSidebar()" [class.full-width]="!shouldShowSidebar()">
    <!-- Mobile Top Bar (only in list view) -->
    @if (isMobileView() && shouldShowSidebar()) {
    <div class="mobile-top-bar">
      <button mat-icon-button (click)="toggleSidebar()" aria-label="Toggle categories menu" class="menu-button">
        <mat-icon>menu</mat-icon>
      </button>
    </div>
    }

    <!-- Desktop Header (only in list view) -->
    @if (!isMobileView() && shouldShowSidebar()) {
    <div class="content-header">
      <div class="header-info">
        <h1 class="category-title">{{ selectedCategoryName() }}</h1>
        <p class="result-count">{{ resultCountText() }}</p>
      </div>
    </div>
    }

    <!-- Content Container -->
    <div class="content-container">
      <!-- Router Outlet: Delegates to ChallengeListComponent or ChallengeDetailsComponent -->
      <router-outlet />
    </div>
  </main>
</div>