<div class="challenges-browser">
  <!-- Category Sidebar (only shown in list view on desktop) -->
  @if (shouldShowSidebar() && !isMobileView()) {
  <app-category-sidebar
    [isOpen]="isSidebarOpen()"
    [isMobile]="false"
    [displayMode]="'drawer'"
    (categorySelect)="onCategorySelect($event)"
    (closeDrawer)="closeSidebar()"
  />
  }

  <!-- Main Content Area -->
  <main class="content-area" [class.shifted]="!isMobileView() && shouldShowSidebar()" [class.full-width]="!shouldShowSidebar()">
    <!-- Workspace Toolbar (only in workspace view) - Self-contained -->
    @if (isWorkspaceRoute()) {
      <ng-coding-challenges-workspace-toolbar />
    }

    <!-- Mobile Top Bar (only in list view) -->
    @if (isMobileView() && shouldShowSidebar()) {
    <div class="mobile-top-bar">
      <!-- Embedded Category Pills -->
      <app-category-sidebar
        [isOpen]="true"
        [isMobile]="true"
        [displayMode]="'inline'"
        (categorySelect)="onCategorySelect($event)"
      />
    </div>
    }

    <!-- Desktop Header (only in list view) -->
    @if (!isMobileView() && shouldShowSidebar()) {
    <div class="content-header">
      <div class="header-info">
        <h1 class="category-title">{{ selectedCategoryName() }}</h1>
        <p class="result-count">{{ resultCountText() }}</p>
      </div>
    </div>
    }

    <!-- Content Container -->
    <div class="content-container" [ngClass]="containerClass()">
      <!-- Router Outlet: Delegates to ChallengeListComponent or ChallengeDetailsComponent -->
      <router-outlet />
    </div>
  </main>
</div>
