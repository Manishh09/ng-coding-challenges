<header>
  <mat-toolbar
    color="primary"
    class="header-toolbar"
    role="banner"
    aria-label="Main site header"
  >
    <div class="header-container">
      <!-- Logo Section: semantic, accessible -->
      <div class="logo-section">
        <a
          routerLink="/"
          class="logo-link"
          [attr.aria-label]="'Go to ' + appName() + ' home page'"
        >
          <span class="logo-image-wrap">
            <span
              class="angular-logo-gradient"
              role="img"
              [attr.aria-label]="appName() + ' logo'"
              [style.--logo-src]="'url(' + logoUrl() + ')'"
            ></span>
            <img
              [ngSrc]="logoUrl()"
              [alt]="appName() + ' logo'"
              width="64"
              height="42"
              fetchpriority="high"
              [title]="appName() + ' logo'"
              class="angular-logo-img"
            />
          </span>
          <span class="logo-text">
            <span class="ng-prefix" aria-hidden="true">ng</span>Quest
          </span>
        </a>
      </div>

      <!-- Navigation: semantic and accessible -->
      <nav
        class="nav-section"
        aria-label="Primary navigation"
        [class.desktop-only]="showMobileMenu()"
      >
        <ng-content select="[slot=nav-items]"></ng-content>
      </nav>

      <!-- Search Trigger (Desktop) -->
      @if (!isMobile()) {
        <div class="search-section">
          <button
            class="search-trigger"
            (click)="openGlobalSearch()"
            aria-label="Open search"
            type="button"
          >
            <mat-icon class="search-trigger-icon">search</mat-icon>
            <span class="search-trigger-text">Search challenges...</span>
            <kbd class="search-trigger-hint">/</kbd>
          </button>
        </div>
      }

      <!-- Actions Section -->
      <div class="actions-section">
        <!-- GitHub: semantic, keyboard accessible -->
        <a
          href="https://github.com/Manishh09/ng-coding-challenges"
          mat-icon-button
          target="_blank"
          rel="noopener noreferrer"
          class="github-logo-link"
          aria-label="Open GitHub repository"
        >
          <svg
            class="github-svg"
            viewBox="0 0 24 24"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M12 2C6.477 2 2 6.486 2 12.021c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.482 0-.237-.009-.866-.013-1.699-2.782.605-3.369-1.343-3.369-1.343-.455-1.16-1.11-1.47-1.11-1.47-.907-.62.069-.607.069-.607 1.003.071 1.531 1.03 1.531 1.03.892 1.532 2.341 1.089 2.91.833.091-.648.35-1.089.636-1.34-2.221-.253-4.555-1.113-4.555-4.95 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.27.098-2.647 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0 1 12 6.844c.85.004 1.705.115 2.504.337 1.91-1.296 2.748-1.026 2.748-1.026.546 1.377.202 2.394.1 2.647.64.7 1.028 1.595 1.028 2.688 0 3.846-2.338 4.695-4.566 4.944.359.31.678.92.678 1.854 0 1.337-.012 2.415-.012 2.743 0 .267.18.578.688.48A10.02 10.02 0 0 0 22 12.02C22 6.486 17.523 2 12 2z"
            />
          </svg>
        </a>

        <!-- LinkedIn: semantic, keyboard accessible -->
        <a
          href="https://www.linkedin.com/in/manishboge/"
          target="_blank"
          rel="noopener noreferrer"
          mat-icon-button
          class="linkedin-btn"
          aria-label="Open LinkedIn profile"
        >
          <svg
            class="linkedin-svg"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M22.23 0H1.77C0.79 0 0 0.774 0 1.729v20.542C0 23.225 0.79 24 1.77 24h20.46C23.21 24 24 23.225 24 22.271V1.729C24 0.774 23.21 0 22.23 0zM7.09 20.452H3.545V9h3.545v11.452zM5.318 7.452c-1.136 0-2.056-.922-2.056-2.058 0-1.136.92-2.058 2.056-2.058 1.135 0 2.057.922 2.057 2.058 0 1.136-.922 2.058-2.057 2.058zM20.452 20.452h-3.545v-5.605c0-1.336-.026-3.054-1.862-3.054-1.864 0-2.15 1.452-2.15 2.951v5.708h-3.546V9h3.405v1.561h.049c.474-.9 1.632-1.85 3.359-1.85 3.593 0 4.256 2.364 4.256 5.437v6.304z"
            />
          </svg>
        </a>

        <!-- Theme Toggle: ensure aria-label available -->
        <ng-coding-challenges-theme-toggle
          aria-label="Toggle dark and light theme"
        ></ng-coding-challenges-theme-toggle>

        <!-- Mobile Search Button -->
        @if (isMobile()) {
          <button
            mat-icon-button
            (click)="openGlobalSearch()"
            class="mobile-search-btn"
            aria-label="Open search"
            type="button"
          >
            <mat-icon aria-hidden="true">search</mat-icon>
          </button>
        }

        <!-- Mobile Menu Button: semantic, focusable, controlled -->
        @if (showMobileMenu()) {
        <button
          mat-icon-button
          [matMenuTriggerFor]="mobileMenu"
          (menuOpened)="mobileMenuOpen.set(true)"
          (menuClosed)="mobileMenuOpen.set(false)"
          class="mobile-menu-btn mobile-only"
          aria-label="Open mobile navigation menu"
          aria-controls="mobileMenu"
          [attr.aria-expanded]="mobileMenuOpen()"
          type="button"
        >
          <mat-icon aria-hidden="true">menu</mat-icon>
        </button>
        }

        <!-- Custom Action Buttons -->
        <ng-content select="[slot=actions]"></ng-content>
      </div>
    </div>
  </mat-toolbar>
</header>

<!-- Mobile Menu: labelled, accessible -->
<mat-menu
  #mobileMenu="matMenu"
  id="mobileMenu"
  aria-label="Mobile navigation menu"
>
  <ng-content select="[slot=mobile-nav]"></ng-content>
</mat-menu>
