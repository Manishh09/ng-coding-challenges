/* =============================================================================
 * Shared SCSS Mixins
 * =============================================================================
 * Reusable mixins for consistent styling across UI components.
 * Promotes DRY principles and maintainability.
 * ============================================================================= */

/* -----------------------------------------------------------------------------
 * Scrollbar Customization
 * ----------------------------------------------------------------------------- */

/// Custom scrollbar styling for consistent cross-browser appearance
/// @param {number} $width - Width of the scrollbar (default: 6px)
/// @param {color} $thumb-color - Color of the scrollbar thumb
/// @param {color} $track-color - Color of the scrollbar track
@mixin custom-scrollbar(
  $width: 6px,
  $thumb-color: var(--border-primary),
  $track-color: transparent
) {
  scrollbar-width: thin;
  scrollbar-color: $thumb-color $track-color;

  &::-webkit-scrollbar {
    width: $width;
    height: $width;
  }

  &::-webkit-scrollbar-track {
    background: $track-color;
  }

  &::-webkit-scrollbar-thumb {
    background: $thumb-color;
    border-radius: var(--border-radius-full);

    &:hover {
      background: var(--border-secondary);
    }
  }
}

/* -----------------------------------------------------------------------------
 * Focus State
 * ----------------------------------------------------------------------------- */

/// Standard focus indicator for interactive elements
/// @param {color} $color - Focus ring color (default: primary)
/// @param {number} $width - Focus ring width (default: 2px)
/// @param {number} $offset - Focus ring offset (default: 2px)
@mixin focus-ring(
  $color: var(--state-focus-ring),
  $width: 2px,
  $offset: 2px
) {
  &:focus-visible {
    outline: $width solid $color;
    outline-offset: $offset;
  }

  &:focus:not(:focus-visible) {
    outline: none;
  }
}

/* -----------------------------------------------------------------------------
 * Text Truncation
 * ----------------------------------------------------------------------------- */

/// Single-line text truncation with ellipsis
@mixin truncate-text {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/// Multi-line text truncation (line clamping)
/// @param {number} $lines - Number of lines to show (default: 2)
@mixin line-clamp($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  word-break: break-word;
}

/* -----------------------------------------------------------------------------
 * Button Reset
 * ----------------------------------------------------------------------------- */

/// Reset button default styles for custom styling
@mixin button-reset {
  appearance: none;
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  font-family: inherit;
  font-size: inherit;
  color: inherit;
  cursor: pointer;
  text-align: left;

  &:disabled {
    cursor: not-allowed;
    opacity: 0.5;
  }
}

/* -----------------------------------------------------------------------------
 * Flex Layouts
 * ----------------------------------------------------------------------------- */

/// Flexbox centering (both axes)
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

/// Flexbox with space between items
@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/// Flexible column layout
@mixin flex-column($gap: var(--spacing-md)) {
  display: flex;
  flex-direction: column;
  gap: $gap;
}

/* -----------------------------------------------------------------------------
 * Positioning
 * ----------------------------------------------------------------------------- */

/// Absolute positioning to fill parent
@mixin absolute-fill {
  position: absolute;
  inset: 0;
}

/// Fixed positioning to fill viewport
@mixin fixed-fill {
  position: fixed;
  inset: 0;
}

/* -----------------------------------------------------------------------------
 * Visual Effects
 * ----------------------------------------------------------------------------- */

/// Glassmorphism effect
@mixin glass-surface(
  $bg-color: rgba(255, 255, 255, 0.1),
  $blur: 24px
) {
  background: $bg-color;
  backdrop-filter: blur($blur) saturate(180%);
  -webkit-backdrop-filter: blur($blur) saturate(180%);
}

/// Card elevation with shadow
/// @param {string} $level - Elevation level: sm, md, lg, xl
@mixin card-elevation($level: 'md') {
  @if $level == 'sm' {
    box-shadow: var(--shadow-sm);
  } @else if $level == 'md' {
    box-shadow: var(--shadow-md);
  } @else if $level == 'lg' {
    box-shadow: var(--shadow-lg);
  } @else if $level == 'xl' {
    box-shadow: var(--shadow-xl);
  }
}

/* -----------------------------------------------------------------------------
 * Animations
 * ----------------------------------------------------------------------------- */

/// Smooth transition for multiple properties
/// @param {list} $properties - Properties to transition
/// @param {time} $duration - Animation duration (default: standard)
/// @param {function} $easing - Easing function (default: standard)
@mixin smooth-transition(
  $properties,
  $duration: var(--animation-duration-standard),
  $easing: var(--animation-easing)
) {
  transition-property: $properties;
  transition-duration: $duration;
  transition-timing-function: $easing;
}

/// Hardware-accelerated animation
@mixin gpu-accelerated {
  transform: translateZ(0);
  backface-visibility: hidden;
  will-change: transform;
}

/* -----------------------------------------------------------------------------
 * Responsive Typography
 * ----------------------------------------------------------------------------- */

/// Fluid typography using clamp
/// @param {size} $min - Minimum font size
/// @param {size} $preferred - Preferred viewport-based size
/// @param {size} $max - Maximum font size
@mixin fluid-type($min, $preferred, $max) {
  font-size: clamp($min, $preferred, $max);
}

/* -----------------------------------------------------------------------------
 * Accessibility
 * ----------------------------------------------------------------------------- */

/// Visually hidden but accessible to screen readers
@mixin visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/// Respect reduced motion preferences
@mixin respect-motion-preference {
  @media (prefers-reduced-motion: reduce) {
    @content;
  }
}

/// High contrast mode support
@mixin high-contrast-mode {
  @media (prefers-contrast: high) {
    @content;
  }
}

/* -----------------------------------------------------------------------------
 * Breakpoints
 * ----------------------------------------------------------------------------- */

$breakpoints: (
  'mobile': 480px,
  'tablet': 768px,
  'desktop': 1024px,
  'wide': 1440px
);

/// Responsive media query helper
/// @param {string} $breakpoint - Breakpoint name from $breakpoints map
@mixin respond-to($breakpoint) {
  @if map-has-key($breakpoints, $breakpoint) {
    $value: map-get($breakpoints, $breakpoint);
    @media (min-width: $value) {
      @content;
    }
  } @else {
    @warn "Invalid breakpoint: #{$breakpoint}. Available breakpoints: #{map-keys($breakpoints)}";
  }
}

/// Custom media query
/// @param {size} $min - Minimum width
/// @param {size} $max - Maximum width (optional)
@mixin custom-media($min, $max: null) {
  @if $max {
    @media (min-width: $min) and (max-width: $max) {
      @content;
    }
  } @else {
    @media (min-width: $min) {
      @content;
    }
  }
}

/* -----------------------------------------------------------------------------
 * Interactive States
 * ----------------------------------------------------------------------------- */

/// Standard hover effect
/// @param {color} $bg - Background color on hover
/// @param {transform} $transform - Transform on hover
@mixin hover-lift(
  $bg: var(--state-hover-bg),
  $transform: translateY(-2px)
) {
  transition: all var(--animation-duration-fast) var(--animation-easing);

  &:hover:not(:disabled) {
    background: $bg;
    transform: $transform;
  }
}

/// Interactive element with all states
@mixin interactive-states {
  cursor: pointer;
  transition: all var(--animation-duration-fast) var(--animation-easing);

  &:hover:not(:disabled) {
    @content;
  }

  @include focus-ring;

  &:active:not(:disabled) {
    transform: scale(0.98);
  }

  &:disabled {
    cursor: not-allowed;
    opacity: 0.5;
    pointer-events: none;
  }
}

/* -----------------------------------------------------------------------------
 * Grid Layouts
 * ----------------------------------------------------------------------------- */

/// Responsive grid with auto-fit
/// @param {size} $min - Minimum column width
/// @param {size} $max - Maximum column width
/// @param {size} $gap - Gap between items
@mixin auto-grid(
  $min: 250px,
  $max: 1fr,
  $gap: var(--spacing-lg)
) {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax($min, $max));
  gap: $gap;
}

/* -----------------------------------------------------------------------------
 * Aspect Ratio
 * ----------------------------------------------------------------------------- */

/// Maintain aspect ratio (modern approach)
/// @param {ratio} $ratio - Aspect ratio (e.g., 16 / 9)
@mixin aspect-ratio($ratio) {
  aspect-ratio: $ratio;
}
